---
name: κΈ°λ¥ κ°λ°
about: κΈ°λ¥λ…μ„Έμ„ κΈ°λ° κ°λ° μ‘μ—…μ„ μ„ν• μ΄μ ν…ν”λ¦Ώ
title: '[CRAWL] REQ-CRAWL-001 | Tour API ν΄λΌμ΄μ–ΈνΈ κµ¬ν„'
labels: 'λ°±μ—”λ“'
assignees: 'TRIP1'
---

## π“‹ κΈ°λ¥ κ°μ”
**μ”κµ¬μ‚¬ν•­ ID**: REQ-CRAWL-001
ν•κµ­κ΄€κ΄‘κ³µμ‚¬ Tour APIλ¥Ό ν™μ©ν• κ΄€κ΄‘μ§€ λ°μ΄ν„° μμ§‘ ν΄λΌμ΄μ–ΈνΈλ¥Ό κµ¬ν„ν•©λ‹λ‹¤.

## π― κ°λ° λ©ν‘
- ν•κµ­κ΄€κ΄‘κ³µμ‚¬ Tour APIλ¥Ό μ—°λ™ν•μ—¬ μ‹¤μ‹κ°„ κ΄€κ΄‘μ§€ λ°μ΄ν„°λ¥Ό μμ§‘ν•©λ‹λ‹¤.
- KorService2 μ—”λ“ν¬μΈνΈλ¥Ό ν™μ©ν•μ—¬ μ„μΈ μ§€μ—­ κ΄€κ΄‘μ§€ μ •λ³΄λ¥Ό 1,000κ° μ΄μƒ μμ§‘ν•©λ‹λ‹¤.
- AI μ¶”μ² μ‹μ¤ν…μ„ μ„ν• κµ¬μ΅°ν™”λ λ°μ΄ν„°λ¥Ό μ κ³µν•©λ‹λ‹¤.
- λ€μ©λ‰ λ°μ΄ν„° μ²λ¦¬λ¥Ό μ„ν• ν¨μ¨μ μΈ ν΄λΌμ΄μ–ΈνΈλ¥Ό κµ¬ν„ν•©λ‹λ‹¤.

## π“ κΈ°λ¥ λ…μ„Έ

### API Endpoints
- **`GET /api/test/tour/test/connection`**: Tour API μ—°κ²° ν…μ¤νΈ
- **`GET /api/test/tour/seoul/tourist-spots`**: μ„μΈ κ΄€κ΄‘μ§€ μ΅°ν
- **`GET /api/test/tour/seoul/category/{category}`**: μΉ΄ν…κ³ λ¦¬λ³„ μ„μΈ κ΄€κ΄‘μ§€ μ΅°ν
- **`GET /api/test/tour/search?keyword={keyword}`**: ν‚¤μ›λ“ κ²€μƒ‰
- **`GET /api/test/tour/seoul/all`**: μ„μΈ μ „μ²΄ λ°μ΄ν„° μμ§‘ (1,000κ° μ΄μƒ)
- **`GET /api/test/tour/mock/test`**: λ¨μ λ°μ΄ν„° ν…μ¤νΈ

### Tour API μ—°λ™ κΈ°λ¥
- **μ§€μ—­ κΈ°λ° κ΄€κ΄‘μ •λ³΄ μ΅°ν** (`areaBasedList2`)
- **μ„μΉ κΈ°λ° κ΄€κ΄‘μ •λ³΄ μ΅°ν** (`locationBasedList1`)
- **ν‚¤μ›λ“ κ²€μƒ‰** (`searchKeyword1`)
- **μƒμ„Έμ •λ³΄ μ΅°ν** (`detailCommon1`)

## π”§ κµ¬ν„ μ‚¬ν•­

### Configuration
- [x] `TourApiProperties.java` - API μ„¤μ • κ΄€λ¦¬ ν΄λμ¤ μƒμ„±

### DTO
- [x] `TourApiResponse.java` - JSON μ‘λ‹µ λ§¤ν•‘ DTO μƒμ„±

### Client
- [x] `TourApiClient.java` - HTTP ν΄λΌμ΄μ–ΈνΈ κµ¬ν„

### Service
- [x] `TourApiService.java` - λ°μ΄ν„° μμ§‘ λΉ„μ¦λ‹μ¤ λ΅μ§ κµ¬ν„

### Controller
- [x] `TourApiTestController.java` - ν…μ¤νΈ μ—”λ“ν¬μΈνΈ κµ¬ν„

### Configuration
- [x] Spring Security μ„¤μ • μμ • (`/api/tour/**` κ²½λ΅ ν—μ©)
- [x] `application.yml` Tour API μ„¤μ • μ¶”κ°€

## π“ λ°μ΄ν„° μμ§‘ μ „λµ

### 1. Seoul JSON λ³΄μ™„
- **κΈ°μ΅΄**: 177κ° μƒν” λ°μ΄ν„°
- **λ©ν‘**: 1,000κ° μ΄μƒ μ‹¤μ‹κ°„ λ°μ΄ν„°
- **λ°©λ²•**: Tour API μ‹¤μ‹κ°„ μμ§‘

### 2. μΉ΄ν…κ³ λ¦¬λ³„ μμ§‘
- **κ΄€κ΄‘μ§€**: 500κ° (5νμ΄μ§€ Γ— 100κ°)
- **λ¬Έν™”μ‹μ„¤**: 300κ° (3νμ΄μ§€ Γ— 100κ°)
- **μμ‹μ **: 300κ° (3νμ΄μ§€ Γ— 100κ°)
- **μ‡Όν•‘**: 200κ° (2νμ΄μ§€ Γ— 100κ°)
- **λ ν¬μΈ **: 200κ° (2νμ΄μ§€ Γ— 100κ°)
- **μ™λ°•**: 100κ° (1νμ΄μ§€ Γ— 100κ°)

### 3. μ¤‘λ³µ μ κ±° λ° κ²€μ¦
- **ContentId κΈ°λ° μ¤‘λ³µ μ κ±°**
- **λ°μ΄ν„° ν’μ§ κ²€μ¦**
- **μΆν‘ μ ν¨μ„± κ²€μ‚¬**

## β… μ™„λ£ μ΅°κ±΄
- [x] Tour API ν΄λΌμ΄μ–ΈνΈ κµ¬ν„ λ° μ—°λ™
- [x] KorService2 μ—”λ“ν¬μΈνΈ μ •μƒ μ‘λ™
- [x] λ€μ©λ‰ λ°μ΄ν„° μμ§‘ κΈ°λ¥ (1,000κ° μ΄μƒ)
- [x] Spring Security μ„¤μ • μμ •
- [x] λ¨λ“  ν…μ¤νΈ μ—”λ“ν¬μΈνΈ μ •μƒ μ‘λ™
- [x] μ—λ¬ ν•Έλ“¤λ§ λ° λ΅κΉ… κµ¬ν„

## π§ ν…μ¤νΈ κ²°κ³Ό

### μµμΆ… ν…μ¤νΈ κ²°κ³Ό
1. **Tour API μ—°κ²° ν…μ¤νΈ** β…
   - StatusCode: 200
   - μμ§‘λ λ°μ΄ν„°: 5κ°
   - μƒν”: κ°€νλ™μ„±λ‹Ή, κ°„λ°λ©”κ³µμ› λ“±

2. **μ„μΈ κ΄€κ΄‘μ§€ λ°μ΄ν„° μ΅°ν** β…
   - StatusCode: 200
   - RawContentLength: 4,975 bytes
   - JSON λ°μ΄ν„° μ •μƒ μμ§‘

3. **μΉ΄ν…κ³ λ¦¬λ³„ λ°μ΄ν„° μ΅°ν** β…
   - StatusCode: 200
   - RawContentLength: 2,464 bytes
   - Palace μΉ΄ν…κ³ λ¦¬ λ°μ΄ν„° μ •μƒ

4. **λ€μ©λ‰ λ°μ΄ν„° μμ§‘** β…
   - StatusCode: 200
   - RawContentLength: 725,020 bytes (μ•½ 725KB)
   - 1,000κ° μ΄μƒ λ°μ΄ν„° μμ§‘ μ„±κ³µ

## π‰ κµ¬ν„ μ™„λ£ μƒνƒ

**κµ¬ν„ μ™„λ£μΌ**: 2025λ…„ 9μ›” 10μΌ  
**κµ¬ν„μ**: TRIP1 ν€  
**μƒνƒ**: β… **μ™„λ£**

### π“ κµ¬ν„λ νμΌ λ©λ΅
```
src/main/java/com/compass/domain/trip/
β”β”€β”€ config/
β”‚   β””β”€β”€ TourApiProperties.java              # API μ„¤μ • κ΄€λ¦¬
β”β”€β”€ dto/
β”‚   β””β”€β”€ TourApiResponse.java                # JSON μ‘λ‹µ λ§¤ν•‘ DTO
β”β”€β”€ client/
β”‚   β””β”€β”€ TourApiClient.java                  # HTTP ν΄λΌμ΄μ–ΈνΈ
β”β”€β”€ service/
β”‚   β””β”€β”€ TourApiService.java                 # λΉ„μ¦λ‹μ¤ λ΅μ§ μ„λΉ„μ¤
β””β”€β”€ controller/
    β””β”€β”€ TourApiTestController.java          # ν…μ¤νΈ μ—”λ“ν¬μΈνΈ

src/main/resources/
β””β”€β”€ application.yml                         # Tour API μ„¤μ • μ¶”κ°€

src/main/java/com/compass/config/
β””β”€β”€ SecurityConfig.java                     # Spring Security μ„¤μ • μμ •
```

### π”„ λ‹¤μ λ‹¨κ³„ μ¤€λΉ„
- **REQ-CRAWL-002**: Phase-λ³„ ν¬λ΅¤λ§ κµ¬ν„ β… (μ™„λ£)
- **REQ-CRAWL-003**: tour_places ν…μ΄λΈ” κµ¬ν„ β… (μ™„λ£)
- **λ°μ΄ν„°λ² μ΄μ¤ μ €μ¥**: μμ§‘λ λ°μ΄ν„° RDS μ €μ¥ β… (μ™„λ£)
- **μ—”ν‹°ν‹° μµμ ν™”**: λ¶ν•„μ”ν• null ν•„λ“ μ κ±°λ΅ ν¨μ¨μ„± ν–¥μƒ β… (μ™„λ£)
- **AI μ¶”μ² μ‹μ¤ν…**: μμ§‘λ λ°μ΄ν„° κΈ°λ° AI μ¶”μ² (λ‹¤μ λ‹¨κ³„)

## π“ μ°Έκ³ μ‚¬ν•­
- ν•κµ­κ΄€κ΄‘κ³µμ‚¬ Tour API KorService2 μ—”λ“ν¬μΈνΈλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
- API ν‚¤λ” ν™κ²½λ³€μ `TOUR_API_SERVICE_KEY`λ΅ κ΄€λ¦¬λ©λ‹λ‹¤.
- λ€μ©λ‰ λ°μ΄ν„° μμ§‘ μ‹ Rate Limiting(100ms)μ„ μ μ©ν•©λ‹λ‹¤.
- μμ§‘λ λ°μ΄ν„°λ” AI μ¶”μ² μ‹μ¤ν…μ κΈ°λ° λ°μ΄ν„°λ΅ ν™μ©λ©λ‹λ‹¤.
- **ν›„μ† μ‘μ—…**: REQ-CRAWL-002μ—μ„ μ—”ν‹°ν‹° μµμ ν™” μ™„λ£ (λ¶ν•„μ”ν• null ν•„λ“ μ κ±°)
- **λ°μ΄ν„°λ² μ΄μ¤**: AWS RDS PostgreSQL μ—°λ™μΌλ΅ μ‹¤μ  μ΄μ ν™κ²½ κµ¬μ¶•